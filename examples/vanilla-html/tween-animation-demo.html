<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tween åŠ¨ç”»ç¤ºä¾‹ - Canvas Drawing Editor</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f5f5;
    }
    .container {
      display: flex;
      height: 100vh;
    }
    .editor-wrapper {
      flex: 1;
      height: 100%;
    }
    canvas-drawing-editor {
      width: 100%;
      height: 100%;
      display: block;
    }
    .controls {
      width: 320px;
      background: #fff;
      border-left: 1px solid #e0e0e0;
      padding: 20px;
      overflow-y: auto;
    }
    .controls h2 {
      font-size: 18px;
      margin-bottom: 16px;
      color: #333;
    }
    .controls h3 {
      font-size: 14px;
      margin: 20px 0 12px;
      color: #666;
      border-bottom: 1px solid #eee;
      padding-bottom: 8px;
    }
    .btn {
      display: block;
      width: 100%;
      padding: 12px 16px;
      margin-bottom: 10px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: left;
    }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
    .btn-primary { background: #3b82f6; color: #fff; }
    .btn-success { background: #10b981; color: #fff; }
    .btn-warning { background: #f59e0b; color: #fff; }
    .btn-danger { background: #ef4444; color: #fff; }
    .btn-purple { background: #8b5cf6; color: #fff; }
    .btn-pink { background: #ec4899; color: #fff; }
    .btn-outline { background: #fff; color: #333; border: 1px solid #ddd; }
    .info {
      background: #f0f9ff;
      border: 1px solid #bae6fd;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 16px;
      font-size: 13px;
      color: #0369a1;
    }
    .log {
      background: #1e293b;
      border-radius: 8px;
      padding: 12px;
      margin-top: 16px;
      font-family: 'Monaco', 'Consolas', monospace;
      font-size: 12px;
      color: #94a3b8;
      max-height: 200px;
      overflow-y: auto;
    }
    .log-entry { margin-bottom: 4px; }
    .log-entry.start { color: #22c55e; }
    .log-entry.update { color: #f59e0b; }
    .log-entry.complete { color: #3b82f6; }
  </style>
</head>
<body>
  <div class="container">
    <div class="editor-wrapper">
      <canvas-drawing-editor id="editor" title="TweenåŠ¨ç”»æ¼”ç¤º"></canvas-drawing-editor>
    </div>
    <div class="controls">
      <h2>ğŸ¬ Tween åŠ¨ç”»ç¤ºä¾‹</h2>
      <div class="info">
        å…ˆåœ¨ç”»å¸ƒä¸Šç»˜åˆ¶ä¸€äº›å›¾å½¢ï¼ˆçŸ©å½¢ã€åœ†å½¢ç­‰ï¼‰ï¼Œç„¶åé€‰ä¸­ä¸€ä¸ªå¯¹è±¡ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ä½“éªŒåŠ¨ç”»æ•ˆæœã€‚
      </div>

      <h3>ğŸ“ ä½ç§»åŠ¨ç”»</h3>
      <button class="btn btn-primary" onclick="animateMove()">ç§»åŠ¨åˆ°å³è¾¹ â†’</button>
      <button class="btn btn-primary" onclick="animateMoveBack()">ç§»åŠ¨åˆ°å·¦è¾¹ â†</button>

      <h3>ğŸ“ ç¼©æ”¾åŠ¨ç”»</h3>
      <button class="btn btn-success" onclick="animateScale()">æ”¾å¤§ 2 å€</button>
      <button class="btn btn-success" onclick="animateScaleDown()">ç¼©å°åˆ°ä¸€åŠ</button>

      <h3>ğŸ”„ æ—‹è½¬åŠ¨ç”»</h3>
      <button class="btn btn-warning" onclick="animateRotate()">æ—‹è½¬ 360Â°</button>
      <button class="btn btn-warning" onclick="animateRotate45()">æ—‹è½¬ 45Â°</button>

      <h3>âœ¨ é€æ˜åº¦åŠ¨ç”»</h3>
      <button class="btn btn-purple" onclick="animateFadeOut()">æ·¡å‡º (é€æ˜åº¦â†’0.2)</button>
      <button class="btn btn-purple" onclick="animateFadeIn()">æ·¡å…¥ (é€æ˜åº¦â†’1)</button>

      <h3>ğŸª ç»„åˆåŠ¨ç”»</h3>
      <button class="btn btn-pink" onclick="animateCombo()">ç§»åŠ¨+æ—‹è½¬+ç¼©æ”¾</button>
      <button class="btn btn-pink" onclick="animateBounce()">å¼¹æ€§æ•ˆæœ</button>

      <h3>ğŸ” å¾ªç¯åŠ¨ç”»</h3>
      <button class="btn btn-danger" onclick="animateLoop()">æ— é™å¾€è¿”</button>
      <button class="btn btn-outline" onclick="stopAllAnimations()">â¹ åœæ­¢æ‰€æœ‰åŠ¨ç”»</button>

      <h3>ğŸ“‹ åŠ¨ç”»æ—¥å¿—</h3>
      <div class="log" id="log"></div>
    </div>
  </div>

  <script src="../../dist/canvas-drawing-editor.umd.js"></script>
  <script>
    const editor = document.getElementById('editor');
    const logEl = document.getElementById('log');

    function log(msg, type = '') {
      const entry = document.createElement('div');
      entry.className = 'log-entry ' + type;
      entry.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
      logEl.insertBefore(entry, logEl.firstChild);
      if (logEl.children.length > 50) logEl.removeChild(logEl.lastChild);
    }

    function getSelectedId() {
      const selected = editor.getSelectedObject?.() || editor.selectedId;
      if (!selected) {
        alert('è¯·å…ˆé€‰ä¸­ä¸€ä¸ªå¯¹è±¡ï¼');
        return null;
      }
      return typeof selected === 'object' ? selected.id : selected;
    }

    // ========== ä½ç§»åŠ¨ç”» ==========
    function animateMove() {
      const id = getSelectedId();
      if (!id) return;
      const obj = editor.objects.find(o => o.id === id);
      editor.tweenAnimate(id, { x: obj.x + 150 }, {
        duration: 800,
        easing: 'easeOutQuad',
        onStart: () => log('ç§»åŠ¨åŠ¨ç”»å¼€å§‹', 'start'),
        onComplete: () => log('ç§»åŠ¨åŠ¨ç”»å®Œæˆ', 'complete')
      });
    }

    function animateMoveBack() {
      const id = getSelectedId();
      if (!id) return;
      const obj = editor.objects.find(o => o.id === id);
      editor.tweenAnimate(id, { x: obj.x - 150 }, {
        duration: 800,
        easing: 'easeOutQuad',
        onComplete: () => log('å‘å·¦ç§»åŠ¨å®Œæˆ', 'complete')
      });
    }

    // ========== ç¼©æ”¾åŠ¨ç”» ==========
    function animateScale() {
      const id = getSelectedId();
      if (!id) return;
      const obj = editor.objects.find(o => o.id === id);
      const props = {};
      if (obj.width) props.width = obj.width * 2;
      if (obj.height) props.height = obj.height * 2;
      if (obj.radius) props.radius = obj.radius * 2;
      editor.tweenAnimate(id, props, {
        duration: 600,
        easing: 'easeOutBack',
        onStart: () => log('æ”¾å¤§åŠ¨ç”»å¼€å§‹', 'start'),
        onComplete: () => log('æ”¾å¤§åŠ¨ç”»å®Œæˆ', 'complete')
      });
    }

    function animateScaleDown() {
      const id = getSelectedId();
      if (!id) return;
      const obj = editor.objects.find(o => o.id === id);
      const props = {};
      if (obj.width) props.width = obj.width / 2;
      if (obj.height) props.height = obj.height / 2;
      if (obj.radius) props.radius = obj.radius / 2;
      editor.tweenAnimate(id, props, {
        duration: 600,
        easing: 'easeOutQuad',
        onComplete: () => log('ç¼©å°åŠ¨ç”»å®Œæˆ', 'complete')
      });
    }

    // ========== æ—‹è½¬åŠ¨ç”» ==========
    function animateRotate() {
      const id = getSelectedId();
      if (!id) return;
      const obj = editor.objects.find(o => o.id === id);
      editor.tweenAnimate(id, { rotation: (obj.rotation || 0) + Math.PI * 2 }, {
        duration: 1000,
        easing: 'easeInOutQuad',
        onStart: () => log('æ—‹è½¬360Â°å¼€å§‹', 'start'),
        onComplete: () => log('æ—‹è½¬360Â°å®Œæˆ', 'complete')
      });
    }

    function animateRotate45() {
      const id = getSelectedId();
      if (!id) return;
      const obj = editor.objects.find(o => o.id === id);
      editor.tweenAnimate(id, { rotation: (obj.rotation || 0) + Math.PI / 4 }, {
        duration: 500,
        easing: 'easeOutQuad',
        onComplete: () => log('æ—‹è½¬45Â°å®Œæˆ', 'complete')
      });
    }

    // ========== é€æ˜åº¦åŠ¨ç”» ==========
    function animateFadeOut() {
      const id = getSelectedId();
      if (!id) return;
      editor.tweenAnimate(id, { opacity: 0.2 }, {
        duration: 500,
        easing: 'linear',
        onStart: () => log('æ·¡å‡ºåŠ¨ç”»å¼€å§‹', 'start'),
        onComplete: () => log('æ·¡å‡ºåŠ¨ç”»å®Œæˆ', 'complete')
      });
    }

    function animateFadeIn() {
      const id = getSelectedId();
      if (!id) return;
      editor.tweenAnimate(id, { opacity: 1 }, {
        duration: 500,
        easing: 'linear',
        onComplete: () => log('æ·¡å…¥åŠ¨ç”»å®Œæˆ', 'complete')
      });
    }

    // ========== ç»„åˆåŠ¨ç”» ==========
    function animateCombo() {
      const id = getSelectedId();
      if (!id) return;
      const obj = editor.objects.find(o => o.id === id);
      const props = {
        x: obj.x + 100,
        y: obj.y - 50,
        rotation: (obj.rotation || 0) + Math.PI / 2
      };
      if (obj.width) props.width = obj.width * 1.5;
      if (obj.height) props.height = obj.height * 1.5;
      if (obj.radius) props.radius = obj.radius * 1.5;

      editor.tweenAnimate(id, props, {
        duration: 1200,
        easing: 'easeInOutQuad',
        onStart: () => log('ç»„åˆåŠ¨ç”»å¼€å§‹', 'start'),
        onUpdate: (p) => { if (Math.floor(p * 10) % 3 === 0) log(`è¿›åº¦: ${(p*100).toFixed(0)}%`, 'update'); },
        onComplete: () => log('ç»„åˆåŠ¨ç”»å®Œæˆ', 'complete')
      });
    }

    function animateBounce() {
      const id = getSelectedId();
      if (!id) return;
      const obj = editor.objects.find(o => o.id === id);
      editor.tweenAnimate(id, { y: obj.y - 100 }, {
        duration: 800,
        easing: 'easeOutElastic',
        onStart: () => log('å¼¹æ€§åŠ¨ç”»å¼€å§‹', 'start'),
        onComplete: () => log('å¼¹æ€§åŠ¨ç”»å®Œæˆ', 'complete')
      });
    }

    // ========== å¾ªç¯åŠ¨ç”» ==========
    function animateLoop() {
      const id = getSelectedId();
      if (!id) return;
      const obj = editor.objects.find(o => o.id === id);
      editor.tweenAnimate(id, { x: obj.x + 100 }, {
        duration: 1000,
        easing: 'easeInOutQuad',
        repeat: -1,
        yoyo: true,
        onStart: () => log('æ— é™å¾ªç¯åŠ¨ç”»å¼€å§‹ (ç‚¹å‡»åœæ­¢æŒ‰é’®ç»“æŸ)', 'start')
      });
    }

    function stopAllAnimations() {
      editor.stopAllAnimations();
      log('æ‰€æœ‰åŠ¨ç”»å·²åœæ­¢', 'complete');
    }

    // åˆå§‹æç¤º
    log('æ¬¢è¿ï¼è¯·å…ˆç»˜åˆ¶å›¾å½¢ï¼Œç„¶åé€‰ä¸­å®ƒä½“éªŒåŠ¨ç”»æ•ˆæœ');
  </script>
</body>
</html>

